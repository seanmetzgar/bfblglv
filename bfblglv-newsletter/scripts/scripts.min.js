"use strict";var form_wrapper_selector=".form-wrapper",form_selector=".email-form",form_blocks_selector=".email-blocks",fixTabIndex=function(e){e=e===!0?!0:!1,$("body").find("input, select, textarea, button").filter(":not(:hidden)").each(function(e){$(this).prop("tabindex",e+1)}),e&&$("body").find("input, select, textarea, button").filter(":not(:hidden)").eq(0).focus(),fixRequireds()},validateActive=function(){var e=!0,a="";return $("body").find("input, select, textarea").filter(":not(:hidden)").each(function(){"username"===$(this).attr("data-type")&&""!==$(this).val()&&(a=$(this).val(),a=a.replace(/[^a-zA-Z0-9_\-]/g,""),a!=$(this).val()&&$(this).val(a)),"true"===$(this).attr("data-required")&&($(this).is("[type=checkbox]")?$(this).is(":checked")||($(this).addClass("missing"),e=!1):""===$(this).val()&&($(this).addClass("missing"),e=!1)),"email"===$(this).attr("data-type")&&""!==$(this).val()&&(validateEmail($(this).val())||($(this).addClass("missing"),e=!1))}),e},validateEmail=function(e){var a=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i;return a.test(e)},fixRequireds=function(){$("input, textarea, select").filter("[data-required=true]").each(function(){var e=$(this),a=e.parents("label"),t=a.find(".label-text");t.addClass("required")})},prepFields=function(e){var a=0;e.find("[data-original-name]").each(function(){var e=$(this).attr("data-original-name");$(this).removeAttr("data-original-name"),$(this).attr("name",e)}),e.find(".email-block").each(function(){a++,$(this).find("[name^='block_#']").each(function(){var e=$(this).attr("name"),t=e.replace("#",a);$(this).attr("data-original-name",e).attr("name",t)}),$(this).find("[name^='photocheck_block_#']").each(function(){var e=$(this).attr("name"),t=e.replace("#",a);$(this).attr("data-original-name",e).attr("name",t)})}),e.find("[name=number_email_blocks]").val(a)},trumbowygSettings={semantic:!0,removeformatPasted:!0,btns:[["bold","italic","underline"],["link"]]};$.trumbowyg.svgPath="/images/vendor/trumbowyg/icons.svg",$(document).ready(function(){$(form_wrapper_selector).each(function(){var e=$(this),a=e.find(form_selector).eq(0),t=null;a.length>0&&(t=a.find(form_blocks_selector),a.on("change blur",".reliant-toggle",function(){var e=$(this),a=e.parents("label").nextAll(".reliant");e.is(":checked")?a.show():a.hide().find("input,select,textarea").filter(":not([type=checkbox],[type=radio])").val("")}),t.on("click",".panel-title",function(e){var a=$(this);e.preventDefault(),a.parents(".email-block").find(".panel-body").slideToggle()}),a.on("click",".new-email-block",function(e){var a=$(this),l=a.data("block-type"),n=null,i=null,s=null,o=null,d=null;switch(e.preventDefault(),n=$("<div></div>").appendTo(t).addClass("panel").addClass("panel-default").addClass("email-block"),i=$("<div></div>").appendTo(n).addClass("panel-heading"),s=$("<h3></h3>").appendTo(i).addClass("panel-title"),o=$("<div></div>").appendTo(n).addClass("panel-body"),$('<input type="hidden" name="block_#_type" value="'+l+'">').appendTo(o),l){case"double-chips":s.text("Double Article: Two Column"),d=$('<div class="col-md-6"></div>').appendTo(o),$('<h4 class="hidden-md hidden-lg hidden-xl">Left Article</h4>').appendTo(d),$('<label><span class="label-text">Photo<br><em>(Recommended Size: 630 x 280)</em></span><input type="file" name="block_#a_photo" data-required="true"><input name="photocheck_block_#a" value="hello" type="hidden"></label>').appendTo(d),$('<label><span class="label-text">Title</span><input type="text" name="block_#a_title" class="form-control"></label><label><span class="label-text">Link URL</span><input type="text" name="block_#a_url" class="form-control" data-required="true"></label>').appendTo(d),d=$('<div class="col-md-6"></div>').appendTo(o),$('<h4 class="hidden-md hidden-lg hidden-xl">Right Article</h4>').appendTo(d),$('<label><span class="label-text">Photo<br><em>(Recommended Size: 630 x 280)</em></span><input type="file" name="block_#b_photo" data-required="true"><input name="photocheck_block_#b" value="hello" type="hidden"></label>').appendTo(d),$('<label><span class="label-text">Title</span><input type="text" name="block_#b_title" class="form-control"></label><label><span class="label-text">Link URL</span><input type="text" name="block_#b_url" class="form-control" data-required="true"></label>').appendTo(d);break;default:"single-two-col"===l?(s.text("Single Article: Two Column"),$('<label><span class="label-text">Photo <em>(Recommended Size: 400 x 400)</em></span><input type="file" name="block_#_photo"><input name="photocheck_block_#" value="hello" type="hidden"></label>').appendTo(o)):(s.text("Single Article: Full Width"),$('<label><span class="label-text">Photo <em>(Recommended Size: 630 x 280)</em></span><input type="file" name="block_#_photo"><input name="photocheck_block_#" value="hello" type="hidden"></label>').appendTo(o)),$('<label><span class="label-text">Title</span><input type="text" name="block_#_title" class="form-control"></label><label><span class="label-text">Subtitle</span><input type="text" name="block_#_subtitle" class="form-control"></label><label><span class="label-text">Text</span><textarea name="block_#_text" class="wysiwyg form-control"></textarea></label><label><span class="label-text">Button Text</span><input type="text" name="block_#_cta" class="form-control"></label><label><span class="label-text">Link URL</span><input type="text" name="block_#_url" class="form-control"></label>').appendTo(o),o.find("textarea.wysiwyg").trumbowyg(trumbowygSettings)}fixTabIndex()})),a.on("submit",function(){var e=!1;return validateActive()&&(prepFields(a),e=!0),e}),fixTabIndex(!0)}),$("textarea.wysiwyg").trumbowyg(trumbowygSettings),$(".toggler").on("click",function(e){$(".toggler").removeClass("btn-primary"),$(this).addClass("btn-primary"),e.preventDefault(),$(".display-layer").removeClass("active"),$(this).hasClass("toggle-code")&&$(".display-layer.code-display").addClass("active"),$(this).hasClass("toggle-preview")&&$(".display-layer.email-display").addClass("active")})});
//# sourceMappingURL=scripts.min.js.map