"use strict";var version="1.5.3",current_stage=null,next_stage=null,previous_stage=null,signup_wrapper_selector=".signup-wrapper",signup_form_selector=".signup-form",signup_stage_selector=".signup-stage",signup_progress_selector=".signup-progress",signup_extra_data_selector=".extra-form-data",signup_category_questions_selector=".category-specific-container",left=null,opacity=null,scale=null,animating=!1,$partners_table=null,partnerTable=null,$footer=null,fixTabIndex=function(e){e=e===!0?!0:!1,$("body").find("input, select, textarea, button").filter(":not(:hidden)").each(function(e){$(this).prop("tabindex",e+1)}),e&&$("body").find("input, select, textarea, button").filter(":not(:hidden)").eq(0).focus()},validateActive=function(){var e=!0,t="";return $("body").find("input, select, textarea").filter(":not(:hidden)").each(function(){"username"===$(this).attr("data-type")&&""!==$(this).val()&&(t=$(this).val(),t=t.replace(/[^a-zA-Z0-9_\-]/g,""),t!=$(this).val()&&$(this).val(t)),"true"===$(this).attr("data-required")&&($(this).is("[type=checkbox]")?$(this).is(":checked")||($(this).addClass("missing"),e=!1):""===$(this).val()&&($(this).addClass("missing"),e=!1)),"email"===$(this).attr("data-type")&&""!==$(this).val()&&(validateEmail($(this).val())||($(this).addClass("missing"),e=!1))}),e},validateEmail=function(e){var t=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i;return t.test(e)};$(function(){$(signup_wrapper_selector).each(function(){var e=$(this),t=e.find(signup_form_selector).eq(0),n=e.find(signup_progress_selector),r=e.find(signup_extra_data_selector),a=e.find(signup_category_questions_selector);t.length>0&&(t.find("button.next").on("click",function(e){e.preventDefault(),!animating&&validateActive()?(animating=!0,current_stage=$(this).parents(signup_stage_selector),next_stage=$(this).parents(signup_stage_selector).next(signup_stage_selector),n.find("li").eq(t.find(signup_stage_selector).index(next_stage)).addClass("active"),next_stage.show(),current_stage.animate({opacity:0},{step:function(e){scale=1-.2*(1-e),left=50*e+"%",opacity=1-e,current_stage.css({transform:"scale("+scale+")"}),next_stage.css({left:left,opacity:opacity})},duration:800,complete:function(){current_stage.hide(),animating=!1,fixTabIndex(!0)},easing:"easeInOutBack"})):$(this).trigger("blur")}),t.find("button.previous").on("click",function(e){e.preventDefault(),animating?$(this).trigger("blur"):(animating=!0,current_stage=$(this).parents(signup_stage_selector),previous_stage=$(this).parents(signup_stage_selector).prev(signup_stage_selector),n.find("li").eq(t.find(signup_stage_selector).index(current_stage)).removeClass("active"),previous_stage.show(),current_stage.animate({opacity:0},{step:function(e){scale=.8+.2*(1-e),left=50*(1-e)+"%",opacity=1-e,current_stage.css({left:left}),previous_stage.css({transform:"scale("+scale+")",opacity:opacity})},duration:800,complete:function(){current_stage.hide(),animating=!1,fixTabIndex(!0)},easing:"easeInOutBack"}))})),t.on("submit",function(){var e=!1;return validateActive()&&(e=!0),e}),t.find("select[name=partner_category]").on("change blur",function(){var e=$(this);switch(e.val()){case"csa-farm-share":case"farm":0===a.find(".farms-questions").length&&(a.empty(),r.find(".farms-questions").clone().appendTo(a));break;case"vineyard":0===a.find(".vineyard-questions").length&&(a.empty(),r.find(".vineyard-questions").clone().appendTo(a));break;case"farmers-market":0===a.find(".farmers-market-questions").length&&(a.empty(),r.find(".farmers-market-questions").clone().appendTo(a));break;case"":a.empty();break;default:0===a.find(".other-questions").length&&(a.empty(),r.find(".other-questions").clone().appendTo(a))}fixTabIndex()}).trigger("change"),t.on("change blur",".csa-toggle-1,.csa-toggle-2",function(){var e=t.find(".csa-toggle-1"),n=t.find(".csa-toggle-2"),a=t.find(".csa-specific-container");e.is(":checked")||n.is(":checked")?0===a.find(".csa-specific").length&&(a.empty(),r.find(".csa-specific").clone().appendTo(a)):a.empty(),fixTabIndex()}).trigger("change"),t.on("change blur",".other-products-toggle",function(){var e=$(this),n=t.find(".other-products");e.is(":checked")?n.show():n.hide().find("textarea").val("")}).trigger("change"),t.on("change blur",".reliant-toggle",function(){var e=$(this),t=e.parents("label").nextAll(".reliant");e.is(":checked")?t.show():t.hide().find("input,select,textarea").filter(":not([type=checkbox],[type=radio])").val("")}),$("body").on("click",".pseudo-select a",function(e){var t=$(this),n=t.parents(".dropdown-menu"),r=n.parents(".input-group"),a=!1,i=n.attr("data-value-name"),s=1===r.length?r.find("input[name="+i+"]"):!1,o=t.is("[data-value]")?t.attr("data-value"):t.text();e.preventDefault(),a=n.is("[data-reliant-value]")?n.attr("data-reliant-value"):!1,s!==!1&&(s.val(o),a!==!1&&a===o?s.removeAttr("readonly").val(""):s.attr("readonly","readonly"))}),t.on("focus",".missing",function(){$(this).removeClass("missing")}),t.addClass("initialized").find(signup_stage_selector+":gt(0)").hide(),n.find("li").eq(0).addClass("active"),t.on("click",".hours-add-day",function(e){var t=$(this),n=t.prev(".hours-day"),r=n.clone();e.preventDefault(),r.find("input, select, textarea").each(function(){var e=$(this),t=e.attr("name"),n=/^(.*?)(\d*?)$/i,r=null,a=!1,i=!1;r=n.exec(t),"object"==typeof r&&Array.isArray(r)&&3===r.length&&(a=r[1],i=parseInt(r[2]),i+=1,t=""+a+i,e.attr("name",t)),e.is("[type=radio], [type=checkbox]")?e.prop("checked",!1):e.val("")}),r.insertAfter(n).find("input[type=checkbox]").trigger("blur"),fixTabIndex()}),fixTabIndex(!0)}),$partners_table=$(".partners-table"),partnerTable=$partners_table.addClass("table-striped").addClass("table-bordered").DataTable({pageLength:100,searching:!1}),$("#agree-terms").on("change blur",function(){var e=$(this),t=$("#payment-form");e.is(":checked")?t.show():t.hide()}).trigger("blur"),$(".pseudo-select").each(function(){$(this).find("a").eq(0).trigger("click")}),$("input, textarea, select").filter("[data-required=true]").each(function(){var e=$(this),t=e.parents("label"),n=t.find(".label-text");n.addClass("required")}),window.location.href.indexOf("/admin")>-1&&($('<div style="clear: both; height: 1px; overflow: hidden;">&nbsp;</div>').appendTo(".site-wrapper"),$footer=$("<footer></footer>").appendTo("body"),$footer.addClass("site-footer"),$("<p>Version: "+version+"</p>").appendTo($footer)),$("select").select2()});
//# sourceMappingURL=scripts.min.js.map