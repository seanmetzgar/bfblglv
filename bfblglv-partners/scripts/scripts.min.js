"use strict";var version="1.5.3",current_stage=null,next_stage=null,previous_stage=null,signup_wrapper_selector=".signup-wrapper",signup_form_selector=".signup-form",signup_stage_selector=".signup-stage",signup_progress_selector=".signup-progress",signup_extra_data_selector=".extra-form-data",signup_category_questions_selector=".category-specific-container",left=null,opacity=null,scale=null,animating=!1,$partners_table=null,partnerTable=null,$footer=null,fixTabIndex=function(e){e=!0===e,$("body").find("input, select, textarea, button").filter(":not(:hidden)").each(function(e){$(this).prop("tabindex",e+1)}),e&&$("body").find("input, select, textarea, button").filter(":not(:hidden)").eq(0).focus()},validateActive=function(){var e=!0,t="";return $("body").find("input, select, textarea").filter(":not(:hidden)").each(function(){"username"===$(this).attr("data-type")&&""!==$(this).val()&&(t=(t=$(this).val()).replace(/[^a-zA-Z0-9_\-]/g,""))!=$(this).val()&&$(this).val(t),"true"===$(this).attr("data-required")&&($(this).is("[type=checkbox]")?$(this).is(":checked")||($(this).addClass("missing"),e=!1):""===$(this).val()&&($(this).addClass("missing"),e=!1)),"email"===$(this).attr("data-type")&&""!==$(this).val()&&(validateEmail($(this).val())||($(this).addClass("missing"),e=!1))}),e},validateEmail=function(e){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i.test(e)};$(function(){$(signup_wrapper_selector).each(function(){var e=$(this),n=e.find(signup_form_selector).eq(0),t=e.find(signup_progress_selector),i=e.find(signup_extra_data_selector),a=e.find(signup_category_questions_selector);0<n.length&&(n.find("button.next").on("click",function(e){e.preventDefault(),!animating&&validateActive()?(animating=!0,current_stage=$(this).parents(signup_stage_selector),next_stage=$(this).parents(signup_stage_selector).next(signup_stage_selector),t.find("li").eq(n.find(signup_stage_selector).index(next_stage)).addClass("active"),next_stage.show(),current_stage.animate({opacity:0},{step:function(e){scale=1-.2*(1-e),left=50*e+"%",opacity=1-e,current_stage.css({transform:"scale("+scale+")"}),next_stage.css({left:left,opacity:opacity})},duration:800,complete:function(){current_stage.hide(),fixTabIndex(!(animating=!1))},easing:"easeInOutBack"})):$(this).trigger("blur")}),n.find("button.previous").on("click",function(e){e.preventDefault(),animating?$(this).trigger("blur"):(animating=!0,current_stage=$(this).parents(signup_stage_selector),previous_stage=$(this).parents(signup_stage_selector).prev(signup_stage_selector),t.find("li").eq(n.find(signup_stage_selector).index(current_stage)).removeClass("active"),previous_stage.show(),current_stage.animate({opacity:0},{step:function(e){scale=.8+.2*(1-e),left=50*(1-e)+"%",opacity=1-e,current_stage.css({left:left}),previous_stage.css({transform:"scale("+scale+")",opacity:opacity})},duration:800,complete:function(){current_stage.hide(),fixTabIndex(!(animating=!1))},easing:"easeInOutBack"}))})),n.on("submit",function(){var e=!1;return validateActive()&&(e=!0),e}),n.find("select[name=partner_category]").on("change blur",function(){switch($(this).val()){case"csa-farm-share":case"farm":0===a.find(".farms-questions").length&&(a.empty(),i.find(".farms-questions").clone().appendTo(a));break;case"vineyard":0===a.find(".vineyard-questions").length&&(a.empty(),i.find(".vineyard-questions").clone().appendTo(a));break;case"farmers-market":0===a.find(".farmers-market-questions").length&&(a.empty(),i.find(".farmers-market-questions").clone().appendTo(a));break;case"":a.empty();break;default:0===a.find(".other-questions").length&&(a.empty(),i.find(".other-questions").clone().appendTo(a))}fixTabIndex()}).trigger("change"),n.on("change blur",".csa-toggle-1,.csa-toggle-2",function(){var e=n.find(".csa-toggle-1"),t=n.find(".csa-toggle-2"),a=n.find(".csa-specific-container");e.is(":checked")||t.is(":checked")?0===a.find(".csa-specific").length&&(a.empty(),i.find(".csa-specific").clone().appendTo(a)):a.empty(),fixTabIndex()}).trigger("change"),n.on("change blur",".other-products-toggle",function(){var e=$(this),t=n.find(".other-products");e.is(":checked")?t.show():t.hide().find("textarea").val("")}).trigger("change"),n.on("change blur",".reliant-toggle",function(){var e=$(this),t=e.parents("label").nextAll(".reliant");e.is(":checked")?t.show():t.hide().find("input,select,textarea").filter(":not([type=checkbox],[type=radio])").val("")}),$("body").on("click",".pseudo-select a",function(e){var t,a=$(this),n=a.parents(".dropdown-menu"),i=n.parents(".input-group"),s=n.attr("data-value-name"),r=1===i.length&&i.find("input[name="+s+"]"),o=a.is("[data-value]")?a.attr("data-value"):a.text();e.preventDefault(),t=!!n.is("[data-reliant-value]")&&n.attr("data-reliant-value"),!1!==r&&(r.val(o),!1!==t&&t===o?r.removeAttr("readonly").val(""):r.attr("readonly","readonly"))}),n.on("focus",".missing",function(){$(this).removeClass("missing")}),n.addClass("initialized").find(signup_stage_selector+":gt(0)").hide(),t.find("li").eq(0).addClass("active"),n.on("click",".hours-add-day",function(e){var t=$(this).prev(".hours-day"),a=t.clone();e.preventDefault(),a.find("input, select, textarea").each(function(){var e,t=$(this),a=t.attr("name"),n=!1,i=!1;"object"==typeof(e=/^(.*?)(\d*?)$/i.exec(a))&&Array.isArray(e)&&3===e.length&&(n=e[1],i=parseInt(e[2]),a=""+n+(i+=1),t.attr("name",a)),t.is("[type=radio], [type=checkbox]")?t.prop("checked",!1):t.val("")}),a.insertAfter(t).find("input[type=checkbox]").trigger("blur"),fixTabIndex()}),fixTabIndex(!0)}),$partners_table=$(".partners-table"),partnerTable=$partners_table.addClass("table-striped").addClass("table-bordered").DataTable({pageLength:100,searching:!1}),$("#agree-terms").on("change blur",function(){var e=$(this),t=$("#payment-form");e.is(":checked")?t.show():t.hide()}).trigger("blur"),$("#register-pfb").on("change blur",function(){var e=$(this),t=$("span.amount-owed"),a=$("input[name=amount]"),n=a.data("default"),i=a.val();i=e.is(":checked")?n+50:n,a.val(i),t.text("$"+parseFloat(i).toFixed(2))}).trigger("blur"),$(".pseudo-select").each(function(){$(this).find("a").eq(0).trigger("click")}),$("input, textarea, select").filter("[data-required=true]").each(function(){$(this).parents("label").find(".label-text").addClass("required")}),-1<window.location.href.indexOf("/admin")&&($('<div style="clear: both; height: 1px; overflow: hidden;">&nbsp;</div>').appendTo(".site-wrapper"),($footer=$("<footer></footer>").appendTo("body")).addClass("site-footer"),$("<p>Version: "+version+"</p>").appendTo($footer)),$("select").select2()});
//# sourceMappingURL=scripts.min.js.map